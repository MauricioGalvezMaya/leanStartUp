<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gu√≠a Interactiva: El M√©todo Lean Startup</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony (Stone, Slate, Amber, Sky) -->
    <!-- Application Structure Plan: A guided-tour SPA with top navigation. The structure follows a logical learning path: Introduction -> Core Principles -> The Central Cycle (interactive deep-dive) -> Scaling Concepts -> Broader Context. This linear-feeling flow is chosen over a dashboard to best facilitate the understanding of a complex methodology, guiding the user from foundational concepts to practical application and advanced topics in a digestible manner. -->
    <!-- Visualization & Content Choices: The app uses interactive cards for principles, a clickable diagram for the BML cycle, a toggle-able Chart.js bar chart to compare metric types, an interactive 'Five Whys' process diagram, and expandable sections for pivots and context. All choices prioritize engagement and clarity over static text, using HTML/CSS and JS for all visuals. Chart.js is used for the quantitative comparison. No SVG/Mermaid is used. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f5f5f4; /* stone-100 */
        }
        .nav-link {
            transition: color 0.3s, border-bottom-color 0.3s;
        }
        .nav-link:hover, .nav-link.active {
            color: #f59e0b; /* amber-500 */
            border-bottom-color: #f59e0b; /* amber-500 */
        }
        .content-card {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .content-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .cycle-node {
            cursor: pointer;
            transition: all 0.3s;
        }
        .cycle-node.active {
            background-color: #f59e0b; /* amber-500 */
            color: white;
            transform: scale(1.1);
        }
        .cycle-arrow {
            font-size: 2rem;
            color: #94a3b8; /* slate-400 */
        }
        .tab-button.active {
            background-color: #0284c7; /* sky-600 */
            color: white;
        }
        .pivot-item {
            cursor: pointer;
        }
        .pivot-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
        }
    </style>
</head>
<body class="text-slate-700">

    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-slate-800">Lean Startup</h1>
            <div class="hidden md:flex space-x-8">
                <a href="#inicio" class="nav-link border-b-2 border-transparent pb-1">Inicio</a>
                <a href="#principios" class="nav-link border-b-2 border-transparent pb-1">Principios</a>
                <a href="#ciclo" class="nav-link border-b-2 border-transparent pb-1">El Ciclo</a>
                <a href="#acelerar" class="nav-link border-b-2 border-transparent pb-1">Acelerar</a>
                <a href="#contexto" class="nav-link border-b-2 border-transparent pb-1">Contexto</a>
                <a href="#perfil" class="nav-link border-b-2 border-transparent pb-1">Autor</a>
            </div>
            <button id="mobile-menu-button" class="md:hidden text-slate-800">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4">
            <a href="#inicio" class="block py-2 nav-link">Inicio</a>
            <a href="#principios" class="block py-2 nav-link">Principios</a>
            <a href="#ciclo" class="block py-2 nav-link">El Ciclo</a>
            <a href="#acelerar" class="block py-2 nav-link">Acelerar</a>
            <a href="#contexto" class="block py-2 nav-link">Contexto</a>
            <a href="#perfil" class="block py-2 nav-link">Autor</a>
        </div>
    </header>

    <main class="container mx-auto px-6 py-12">
        
        <section id="inicio" class="text-center min-h-[60vh] flex flex-col justify-center items-center">
            <h2 class="text-4xl md:text-6xl font-bold text-slate-800 mb-4">Transforma la Incertidumbre en Oportunidad</h2>
            <p class="max-w-3xl text-lg text-slate-600 mb-8">
                Esta es una gu√≠a interactiva del m√©todo Lean Startup. Descubre c√≥mo construir negocios sostenibles a trav√©s de la innovaci√≥n continua, la experimentaci√≥n r√°pida y un enfoque centrado en el cliente. Navega por las secciones para explorar los principios, el ciclo de innovaci√≥n y las estrategias para escalar.
            </p>
            <a href="#principios" class="bg-amber-500 text-white font-bold py-3 px-8 rounded-full hover:bg-amber-600 transition-colors">Empezar el Viaje</a>
        </section>

        <section id="principios" class="py-20">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-slate-800">Los 5 Principios Fundamentales</h2>
                <p class="max-w-2xl mx-auto mt-4 text-slate-600">La mentalidad Lean Startup se basa en cinco ideas clave que redefinen el emprendimiento como una disciplina de gesti√≥n rigurosa para navegar la incertidumbre.</p>
            </div>
            <div id="principles-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
            </div>
        </section>

        <section id="ciclo" class="py-20 bg-white rounded-2xl shadow-lg">
            <div class="text-center mb-12 px-4">
                <h2 class="text-3xl font-bold text-slate-800">El Motor de la Innovaci√≥n: Crear-Medir-Aprender</h2>
                <p class="max-w-3xl mx-auto mt-4 text-slate-600">El coraz√≥n de Lean Startup es un ciclo de retroalimentaci√≥n dise√±ado para convertir ideas en valor para el cliente lo m√°s r√°pido posible. Planifica en orden inverso (Aprender -> Medir -> Crear) para asegurar que cada esfuerzo est√© enfocado en el aprendizaje validado.</p>
            </div>
            
            <div class="flex flex-col items-center justify-center gap-12">
                <div class="flex flex-col md:flex-row items-center justify-center gap-4 md:gap-2">
                    <div id="cycle-node-crear" class="cycle-node flex items-center justify-center w-28 h-28 md:w-32 md:h-32 rounded-full bg-slate-200 text-slate-800 font-bold text-lg text-center p-2">CREAR üí°</div>
                    <div class="cycle-arrow transform rotate-90 md:rotate-0">‚Üí</div>
                    <div id="cycle-node-medir" class="cycle-node flex items-center justify-center w-28 h-28 md:w-32 md:h-32 rounded-full bg-slate-200 text-slate-800 font-bold text-lg text-center p-2">MEDIR üìä</div>
                    <div class="cycle-arrow transform rotate-90 md:rotate-0">‚Üí</div>
                    <div id="cycle-node-aprender" class="cycle-node flex items-center justify-center w-28 h-28 md:w-32 md:h-32 rounded-full bg-slate-200 text-slate-800 font-bold text-lg text-center p-2">APRENDER üß†</div>
                </div>
            </div>

            <div id="cycle-content-container" class="mt-12 max-w-4xl mx-auto px-4">
            </div>
        </section>

        <section id="acelerar" class="py-20">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-slate-800">Acelerar: Escalar e Integrar la Metodolog√≠a</h2>
                <p class="max-w-2xl mx-auto mt-4 text-slate-600">Una vez que encuentras un modelo de negocio viable, el enfoque cambia a escalar el crecimiento de forma sostenible y construir una organizaci√≥n que aprenda y se adapte continuamente.</p>
            </div>
            <div class="grid lg:grid-cols-2 gap-12 items-start">
                <div class="bg-white p-8 rounded-2xl shadow-lg content-card">
                    <h3 class="text-2xl font-bold mb-4 text-sky-700">Motores de Crecimiento Sostenible</h3>
                    <p class="mb-6">El crecimiento sostenible proviene de circuitos de retroalimentaci√≥n compuestos. Debes identificar y enfocarte en un motor principal.</p>
                    <div id="engines-of-growth" class="space-y-4"></div>
                </div>
                <div class="bg-white p-8 rounded-2xl shadow-lg content-card">
                    <h3 class="text-2xl font-bold mb-4 text-sky-700">Construir una Organizaci√≥n Adaptativa: Los 5 Porqu√©s</h3>
                    <p class="mb-6">Cuando surgen problemas, en lugar de culpar, utiliza este m√©todo para encontrar la causa ra√≠z sist√©mica y realizar inversiones proporcionales para prevenir su recurrencia.</p>
                    <div id="five-whys-container" class="bg-stone-100 p-6 rounded-lg">
                        <p class="font-bold text-lg">Problema: El servidor se cay√≥.</p>
                        <div id="whys-list" class="mt-4 space-y-2"></div>
                        <button id="add-why-button" class="mt-6 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors">Preguntar "¬øPor qu√©?"</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="contexto" class="py-20 bg-slate-800 text-white rounded-2xl shadow-lg">
            <div class="text-center mb-12 px-4">
                <h2 class="text-3xl font-bold">La Metodolog√≠a en el Contexto Moderno</h2>
                <p class="max-w-2xl mx-auto mt-4 text-slate-300">Lean Startup no es una isla. Se potencia al integrarse con otros marcos y es crucial estar consciente de sus cr√≠ticas y errores comunes para una implementaci√≥n exitosa.</p>
            </div>
            <div class="grid md:grid-cols-2 gap-8 max-w-5xl mx-auto">
                <div>
                    <h3 class="text-2xl font-bold mb-4 text-amber-400">ü§ù Integraciones Clave</h3>
                    <div id="integrations-list" class="space-y-4"></div>
                </div>
                <div>
                    <h3 class="text-2xl font-bold mb-4 text-amber-400">‚ö†Ô∏è Errores Comunes y Cr√≠ticas</h3>
                    <div id="critics-list" class="space-y-4"></div>
                </div>
            </div>
        </section>

        <section id="perfil" class="py-20">
            <div class="bg-white rounded-2xl shadow-lg p-8 md:p-10 mx-auto max-w-4xl">
                <div class="flex flex-col md:flex-row items-center gap-8">
                    <div class="flex-shrink-0">
                        <img class="h-40 w-40 rounded-full object-cover shadow-md border-4 border-amber-500" src="https://placehold.co/200x200/E0E7FF/102A43?text=MGM" alt="Foto de Mauricio Galvez Maya">
                    </div>
                    <div class="text-center md:text-left">
                        <h2 class="text-3xl font-bold text-slate-800">Mauricio Galvez Maya</h2>
                        <p class="text-md font-semibold text-sky-700 mt-1">Founder | Business Intelligence | Data Analyst | SQL | Python | Power BI | Project Manager | ISO 9001</p>
                        <p class="text-slate-600 mt-4 max-w-2xl">
                           Traduzco procesos de negocio complejos en datos accionables, y convierto insights basados en datos en operaciones m√°s eficientes y rentables.
                        </p>
                         <div class="mt-6 flex justify-center md:justify-start items-center space-x-6">
                            <a href="https://www.linkedin.com/in/oscar-mauricio-galvez-maya-b06b786b" target="_blank" class="flex items-center text-slate-700 hover:text-amber-600 transition-colors">
                                <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
                                <span>LinkedIn</span>
                            </a>
                            <a href="https://wa.me/573015250656" target="_blank" class="flex items-center text-slate-700 hover:text-amber-600 transition-colors">
                               <svg fill="currentColor" class="w-6 h-6 mr-2" viewBox="0 0 24 24" aria-hidden="true"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.894 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 4.315 1.919 6.066l-1.225 4.485 4.62-1.212zM12 7.006c-.138 0-.273.024-.401.07B11.11 7.31 10.79 8.1s-.223.537-.312.752c-.09.22-.18.455-.18.66s.09.43.27.595c.18.165.39.35.57.545.18.195.315.33.48.545.165.215.3.405.465.615.165.21.345.39.585.51.24.12.51.18.78.18h.045c.27-.03.51-.135.69-.255.18-.12.315-.27.405-.435.09-.165.135-.345.135-.525s-.045-.36-.09-.51c-.045-.15-.135-.345-.225-.51-.09-.165-.18-.3-.225-.36s-.135-.12-.225-.18c-.09-.06-.18-.09-.225-.105-.045-.015-.135-.015-.225-.015s-.18.015-.27.045c-.09.03-.18.075-.225.12s-.09.135-.09.225.045.18.09.27.09.18.135.225.09.09.135.135.09.09.135.135c.045.045.09.09.135.135.045.045.09.09.135.135s.09.09.135.135c.27-.24.48-.495.615-.765.135-.27.21-.57.21-.885.001-.435-.12-.855-.345-1.215-.225-.36-.54-.66-.9-.885-.36-.225-.78-.345-1.23-.345h.015z"/></svg>
                                <span>WhatsApp</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-slate-800 text-slate-400 text-center py-6">
        <p>Gu√≠a Interactiva del M√©todo Lean Startup. Presentada por <strong>Mauricio Galvez Maya</strong>.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const content = {
                principles: [
                    { title: '1. Los emprendedores est√°n en todas partes', description: 'La metodolog√≠a se aplica a cualquier persona que cree un nuevo producto o servicio bajo incertidumbre, sin importar el tama√±o o sector de la empresa.' },
                    { title: '2. El esp√≠ritu emprendedor es management', description: 'Una startup no es caos, es una instituci√≥n que requiere un nuevo tipo de gesti√≥n adaptada a la incertidumbre extrema para tener √©xito.' },
                    { title: '3. Aprendizaje validado', description: 'El verdadero progreso no es construir cosas, sino aprender emp√≠ricamente c√≥mo construir un negocio sostenible. Es la m√©trica fundamental.' },
                    { title: '4. Crear-Medir-Aprender', description: 'El n√∫cleo operativo. Es el ciclo para transformar ideas en productos, medir la respuesta del cliente y aprender si pivotar o perseverar.' },
                    { title: '5. Contabilidad de la innovaci√≥n', description: 'Un nuevo tipo de contabilidad para un nuevo tipo de gesti√≥n. Se enfoca en m√©tricas accionables para medir el progreso y tomar decisiones.' }
                ],
                cycle: {
                    crear: {
                        title: 'üí° Fase 1: CREAR (Probar)',
                        description: 'El objetivo es construir un Producto M√≠nimo Viable (PMV) para empezar el proceso de aprendizaje lo m√°s r√°pido posible. No se trata de un producto final, sino de un experimento para probar tus hip√≥tesis m√°s arriesgadas.',
                        tabs: [
                            { name: 'PMV en V√≠deo', content: '<strong>Ej: Dropbox.</strong> Se usa cuando el producto es complejo de construir. Un v√≠deo demuestra la propuesta de valor y mide el inter√©s del cliente (ej. inscripciones) antes de escribir c√≥digo.' },
                            { name: 'PMV Conserje', content: '<strong>Ej: Food on the Table.</strong> El servicio se entrega de forma manual y personalizada al primer cliente. Proporciona un aprendizaje cualitativo profundo antes de automatizar.' },
                            { name: 'PMV Mago de Oz', content: '<strong>Ej: Zappos.</strong> El cliente cree interactuar con un sistema autom√°tico, pero los humanos hacen el trabajo detr√°s de escena. Permite probar la experiencia de usuario sin construir el backend.' }
                        ]
                    },
                    medir: {
                        title: 'üìä Fase 2: MEDIR',
                        description: 'Aqu√≠ se determina si los esfuerzos de desarrollo est√°n generando progreso real. Se utiliza la "contabilidad de la innovaci√≥n" para evitar las m√©tricas vanidosas y enfocarse en las accionables.',
                        chart: true
                    },
                    aprender: {
                        title: 'üß† Fase 3: APRENDER (Pivotar o Perseverar)',
                        description: 'La decisi√≥n m√°s cr√≠tica. Si los experimentos demuestran que la estrategia actual funciona, se persevera. Si no, se realiza un pivote: una correcci√≥n de rumbo estructurada para probar una nueva hip√≥tesis fundamental.',
                        pivots: [
                            { name: 'Acercamiento (Zoom-in)', detail: 'Una sola caracter√≠stica se convierte en el producto completo.' },
                            { name: 'Alejamiento (Zoom-out)', detail: 'El producto completo se convierte en una caracter√≠stica de un producto mayor.' },
                            { name: 'Segmento de consumidor', detail: 'El producto resuelve un problema real, pero para un cliente diferente.' },
                            { name: 'Necesidad del consumidor', detail: 'Se descubre un problema m√°s importante que resolver para el mismo cliente.' },
                            { name: 'Plataforma', detail: 'Cambio de una aplicaci√≥n a una plataforma, o viceversa.' },
                            { name: 'Arquitectura de negocio', detail: 'Cambio de alto margen/bajo volumen a bajo margen/alto volumen.' },
                            { name: 'Captura de valor', detail: 'Cambio en el modelo de ingresos (monetizaci√≥n).' },
                            { name: 'Motor de crecimiento', detail: 'Cambio en la estrategia de crecimiento (viral, pegajoso o pagado).' },
                            { name: 'Canal', detail: 'Cambio en el canal de ventas o distribuci√≥n.' },
                            { name: 'Tecnolog√≠a', detail: 'Uso de una nueva tecnolog√≠a para ofrecer la misma soluci√≥n de forma superior.' },
                        ]
                    }
                },
                engines: [
                    { name: 'Motor Pegajoso (Sticky)', icon: 'üîí', detail: 'Enfocado en la retenci√≥n. El crecimiento ocurre cuando la tasa de adquisici√≥n supera la tasa de abandono (churn). Clave: crear un producto indispensable.' },
                    { name: 'Motor Viral', icon: 'üöÄ', detail: 'El crecimiento es un efecto secundario del uso. Los clientes traen nuevos clientes. Clave: optimizar el coeficiente viral (k > 1.0).' },
                    { name: 'Motor Remunerado (Paid)', icon: 'üí∞', detail: 'El crecimiento se financia con ingresos. Se paga por adquirir clientes. Clave: asegurar que el Valor de Vida del Cliente (LTV) sea mayor que el Coste de Adquisici√≥n (CPA).' }
                ],
                fiveWhys: [
                    '¬øPor qu√©? El software fall√≥.',
                    '¬øPor qu√©? Un nuevo ingeniero despleg√≥ un bug.',
                    '¬øPor qu√©? No fue formado correctamente.',
                    '¬øPor qu√©? No tenemos un proceso de onboarding para ingenieros.',
                    '¬øPor qu√©? La direcci√≥n est√° "demasiado ocupada" para crearlo. (Causa Ra√≠z Humana/De Proceso)'
                ],
                integrations: [
                    { name: 'Design Thinking', detail: 'Complementario. Design Thinking es excelente para explorar el espacio del problema y encontrar el "ajuste problema-soluci√≥n". Lean Startup es para probar sistem√°ticamente y encontrar el "ajuste producto-mercado".' },
                    { name: 'Agile', detail: 'Agile es el motor, Lean Startup es el volante. Agile es una metodolog√≠a para construir productos de forma eficiente e iterativa. Lean Startup es una metodolog√≠a de negocio para decidir QU√â producto construir.' },
                    { name: 'Business Model Canvas', detail: 'La herramienta perfecta para la fase de "Saltar". Ayuda a articular las hip√≥tesis del modelo de negocio de forma visual, que luego se prueban con el ciclo Crear-Medir-Aprender.' }
                ],
                critics: [
                    { name: 'Malinterpretar el PMV', detail: 'El error m√°s com√∫n es lanzar un producto de baja calidad en lugar de un experimento de alta calidad. Un PMV debe ser "viable" para generar datos fiables, no solo "m√≠nimo".' },
                    { name: 'El problema del "M√°ximo Local"', detail: 'La optimizaci√≥n incremental puede llevar a mejorar una idea peque√±a, impidiendo los saltos audaces necesarios para la innovaci√≥n disruptiva. Se requiere balancear la iteraci√≥n con la visi√≥n.' },
                    { name: 'El fracaso al pivotar', detail: 'Muchas startups se convierten en "zombis", sin crecer pero sin morir, a menudo por depender de m√©tricas vanidosas o por falta de coraje para admitir que la estrategia ha fallado.' }
                ]
            };

            const principlesGrid = document.getElementById('principles-grid');
            content.principles.forEach(p => {
                const card = document.createElement('div');
                card.className = 'bg-white p-6 rounded-lg shadow-md content-card';
                card.innerHTML = `
                    <h3 class="text-xl font-bold mb-2 text-sky-700">${p.title}</h3>
                    <p class="text-slate-600">${p.description}</p>
                `;
                principlesGrid.appendChild(card);
            });

            const cycleNodes = {
                crear: document.getElementById('cycle-node-crear'),
                medir: document.getElementById('cycle-node-medir'),
                aprender: document.getElementById('cycle-node-aprender')
            };
            const cycleContentContainer = document.getElementById('cycle-content-container');
            let activeCycleNode = null;
            let metricsChart = null;

            function updateCycleContent(stage) {
                if (activeCycleNode === stage) {
                    cycleNodes[stage].classList.remove('active');
                    cycleContentContainer.innerHTML = '';
                    activeCycleNode = null;
                    return;
                }

                Object.values(cycleNodes).forEach(node => node.classList.remove('active'));
                cycleNodes[stage].classList.add('active');
                activeCycleNode = stage;

                const stageContent = content.cycle[stage];
                let html = `<div class="bg-stone-100 p-8 rounded-lg animate-fade-in">
                                <h3 class="text-2xl font-bold mb-4 text-sky-700">${stageContent.title}</h3>
                                <p class="mb-6">${stageContent.description}</p>`;
                
                if (stageContent.tabs) {
                    html += `<div class="flex space-x-2 mb-4 border-b border-slate-300">`;
                    stageContent.tabs.forEach((tab, index) => {
                        html += `<button class="tab-button py-2 px-4 rounded-t-lg transition-colors ${index === 0 ? 'active' : ''}" data-tab="${index}">${tab.name}</button>`;
                    });
                    html += `</div>`;
                    stageContent.tabs.forEach((tab, index) => {
                        html += `<div class="tab-content ${index === 0 ? '' : 'hidden'}">${tab.content}</div>`;
                    });
                }

                if (stageContent.chart) {
                    html += `<div class="my-6">
                                <p class="mb-4">Las <strong>m√©tricas vanidosas</strong> (ej. usuarios totales) pueden parecer buenas pero ocultan la verdad. Las <strong>m√©tricas accionables</strong> (ej. conversi√≥n por cohorte) demuestran causa y efecto, guiando tus acciones.</p>
                                <div class="flex justify-center space-x-4 mb-4">
                                    <button id="vanity-btn" class="bg-slate-300 py-2 px-4 rounded-lg">Ver M√©trica Vanidosa</button>
                                    <button id="actionable-btn" class="bg-sky-600 text-white py-2 px-4 rounded-lg">Ver M√©trica Accionable</button>
                                </div>
                                <div class="chart-container w-full max-w-lg mx-auto h-64 md:h-80 relative">
                                    <canvas id="metricsChart"></canvas>
                                </div>
                             </div>`;
                }

                if (stageContent.pivots) {
                    html += `<h4 class="text-xl font-bold mt-6 mb-4">El Cat√°logo de Pivotes</h4>`;
                    html += `<div id="pivot-list" class="space-y-2">`;
                    stageContent.pivots.forEach((pivot, index) => {
                        html += `<div class="pivot-item border border-slate-300 rounded-lg">
                                    <div class="p-4 flex justify-between items-center bg-white rounded-t-lg">
                                        <h5 class="font-semibold">${pivot.name}</h5>
                                        <span class="text-xl transform transition-transform">+</span>
                                    </div>
                                    <div class="pivot-content bg-white rounded-b-lg">
                                        <p class="p-4 border-t border-slate-200">${pivot.detail}</p>
                                    </div>
                                 </div>`;
                    });
                    html += `</div>`;
                }

                html += `</div>`;
                cycleContentContainer.innerHTML = html;

                if (stageContent.tabs) {
                    cycleContentContainer.querySelectorAll('.tab-button').forEach(button => {
                        button.addEventListener('click', () => {
                            cycleContentContainer.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                            button.classList.add('active');
                            cycleContentContainer.querySelectorAll('.tab-content').forEach(content => content.classList.add('hidden'));
                            cycleContentContainer.querySelectorAll('.tab-content')[button.dataset.tab].classList.remove('hidden');
                        });
                    });
                }

                if (stageContent.chart) {
                    const ctx = document.getElementById('metricsChart').getContext('2d');
                    const vanityData = {
                        labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun'],
                        datasets: [{
                            label: 'Usuarios Totales',
                            data: [100, 250, 500, 900, 1500, 2500],
                            backgroundColor: 'rgba(148, 163, 184, 0.6)',
                            borderColor: 'rgba(148, 163, 184, 1)',
                            borderWidth: 1,
                            tension: 0.4
                        }]
                    };
                    const actionableData = {
                        labels: ['Cohorte Ene', 'Cohorte Feb', 'Cohorte Mar', 'Cohorte Abr', 'Cohorte May', 'Cohorte Jun'],
                        datasets: [{
                            label: 'Tasa de Conversi√≥n por Cohorte (%)',
                            data: [5.1, 5.0, 4.9, 5.1, 5.0, 5.2],
                            backgroundColor: 'rgba(2, 132, 199, 0.6)',
                            borderColor: 'rgba(2, 132, 199, 1)',
                            borderWidth: 1
                        }]
                    };

                    if (metricsChart) metricsChart.destroy();
                    
                    metricsChart = new Chart(ctx, {
                        type: 'bar',
                        data: actionableData,
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: { y: { beginAtZero: true } }
                        }
                    });

                    document.getElementById('vanity-btn').addEventListener('click', (e) => {
                        metricsChart.config.type = 'line';
                        metricsChart.data = vanityData;
                        metricsChart.update();
                        e.target.classList.add('bg-sky-600', 'text-white');
                        document.getElementById('actionable-btn').classList.remove('bg-sky-600', 'text-white');
                    });
                    document.getElementById('actionable-btn').addEventListener('click', (e) => {
                        metricsChart.config.type = 'bar';
                        metricsChart.data = actionableData;
                        metricsChart.update();
                        e.target.classList.add('bg-sky-600', 'text-white');
                        document.getElementById('vanity-btn').classList.remove('bg-sky-600', 'text-white');
                    });
                }

                if(stageContent.pivots) {
                    document.querySelectorAll('.pivot-item').forEach(item => {
                        item.addEventListener('click', () => {
                            const content = item.querySelector('.pivot-content');
                            const icon = item.querySelector('span');
                            if (content.style.maxHeight) {
                                content.style.maxHeight = null;
                                icon.style.transform = 'rotate(0deg)';
                            } else {
                                document.querySelectorAll('.pivot-content').forEach(c => c.style.maxHeight = null);
                                document.querySelectorAll('.pivot-item span').forEach(i => i.style.transform = 'rotate(0deg)');
                                content.style.maxHeight = content.scrollHeight + "px";
                                icon.style.transform = 'rotate(45deg)';
                            }
                        });
                    });
                }
            }

            Object.keys(cycleNodes).forEach(stage => {
                cycleNodes[stage].addEventListener('click', () => updateCycleContent(stage));
            });

            const enginesContainer = document.getElementById('engines-of-growth');
            content.engines.forEach(engine => {
                const div = document.createElement('div');
                div.className = 'border-l-4 border-amber-400 pl-4 py-2';
                div.innerHTML = `<h4 class="font-bold text-lg">${engine.icon} ${engine.name}</h4><p>${engine.detail}</p>`;
                enginesContainer.appendChild(div);
            });

            const whysList = document.getElementById('whys-list');
            const addWhyButton = document.getElementById('add-why-button');
            let whyCounter = 0;
            addWhyButton.addEventListener('click', () => {
                if (whyCounter < content.fiveWhys.length) {
                    const p = document.createElement('p');
                    p.textContent = content.fiveWhys[whyCounter];
                    p.className = 'ml-4';
                    whysList.appendChild(p);
                    whyCounter++;
                }
                if (whyCounter === content.fiveWhys.length) {
                    addWhyButton.textContent = 'Causa Ra√≠z Encontrada';
                    addWhyButton.disabled = true;
                    addWhyButton.classList.add('bg-slate-400', 'cursor-not-allowed');
                }
            });

            const integrationsList = document.getElementById('integrations-list');
            content.integrations.forEach(item => {
                const div = document.createElement('div');
                div.className = 'bg-slate-700 p-4 rounded-lg';
                div.innerHTML = `<h4 class="font-semibold text-lg">${item.name}</h4><p class="text-slate-300">${item.detail}</p>`;
                integrationsList.appendChild(div);
            });

            const criticsList = document.getElementById('critics-list');
            content.critics.forEach(item => {
                const div = document.createElement('div');
                div.className = 'bg-slate-700 p-4 rounded-lg';
                div.innerHTML = `<h4 class="font-semibold text-lg">${item.name}</h4><p class="text-slate-300">${item.detail}</p>`;
                criticsList.appendChild(div);
            });
            
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('section');

            window.addEventListener('scroll', () => {
                let current = 'inicio';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (pageYOffset >= sectionTop - 60) {
                        current = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href').includes(current)) {
                        link.classList.add('active');
                    }
                });
            });
        });
    </script>
</body>
</html>
